<html ng-app="ionicApp">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
		<meta name="format-detection" content="telephone=no">
		<title>中冶长天</title>
		<link href="lib/css/ionic.css" rel="stylesheet">
		<link href="lib/css/toaster.css" rel="stylesheet">
		<link href="lib/css/base.css" rel="stylesheet">
		<link href="css/style.css" rel="stylesheet">
		<script src="lib/js/ionic.bundle.js"></script>
		<script src="lib/js/sha.js"></script>
		<script src="js/appPurchasing.js"></script>
		<script src="js/purchasingCtr.js"></script>
		<script src="js/services.js"></script>
        <script src="lib/js/toaster.js"></script>
		<script src="lib/js/ng-cordova.js"></script>
		<script src="js/photoswipe.js"></script>
		<script src="js/photoswipe-ui-default.min.js"></script>

   		<link rel="stylesheet prefetch" href="css/photoswipe.css">
    	<link rel="stylesheet prefetch" href="css/default-skin.css">
		<script>
			function getQueryString(name)
			{
				var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
				var r = window.location.search.substr(1).match(reg);
				if(r!=null)return  unescape(r[2]); return null;
			}
			
			var rnConfig={
				doQRScan:"doQRScan", //触发二维码扫描 html->rn
				doQRScanCallback:"doQRScanCallback", //触发二维码扫描回调 rn->html
				closeWindow:"closeWindow", //关闭当前窗体 html->rn
				selectImage:"selectImage", //触发选择照片，拍照 html->rn
				selectImageCallback:"selectImageCallback", //触发选择照片，拍照 回调rn->html
            }
            
            window.onload = function () {
				setTimeout(function(){
					if (window.WebViewBridge) {
						//回调返回触发	
						window.WebViewBridge.onMessage = function (message) {
							 
							var messageObj=JSON.parse(message); 
							//判断是哪个功能的回调
							if(messageObj.actionType==rnConfig.doQRScanCallback){
								console.log(messageObj.info); //通过info获取回调参数
								doQRScanCallback(messageObj.info);
							} else if(messageObj.actionType==rnConfig.selectImageCallback) {
								 
								console.log(messageObj); //通过info获取回调参数
								selectImageCallback(messageObj.info);
							}
						};
					}
				});
			};
			
			var account = getQueryString("Account");
		  
		</script>
	</head>
	<body ng-controller="appMain">
		<ion-nav-view></ion-nav-view>
	</body>
	<toaster-container></toaster-container>
	<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

		<!-- Background of PhotoSwipe.
			 It's a separate element as animating opacity is faster than rgba(). -->
		<div class="pswp__bg"></div>
	
		<!-- Slides wrapper with overflow:hidden. -->
		<div class="pswp__scroll-wrap">
	
			<!-- Container that holds slides.
				PhotoSwipe keeps only 3 of them in the DOM to save memory.
				Don't modify these 3 pswp__item elements, data is added later on. -->
			<div class="pswp__container">
				<div class="pswp__item"></div>
				<div class="pswp__item"></div>
				<div class="pswp__item"></div>
			</div>
	
			<!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
			<div class="pswp__ui pswp__ui--hidden">
	
				<div class="pswp__top-bar">
	
					<!--  Controls are self-explanatory. Order can be changed. -->
	
					<div class="pswp__counter"></div>
	
					<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
	
					<!--<button class="pswp__button pswp__button&#45;&#45;share" title="Share"></button>-->
	
					<!--<button class="pswp__button pswp__button&#45;&#45;fs" title="Toggle fullscreen"></button>-->
	
					<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
	
					<!-- element will get class pswp__preloader--active when preloader is running -->
					<div class="pswp__preloader">
						<div class="pswp__preloader__icn">
							<div class="pswp__preloader__cut">
								<div class="pswp__preloader__donut"></div>
							</div>
						</div>
					</div>
				</div>
	
				<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
					<div class="pswp__share-tooltip"></div>
				</div>
	
				<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
				</button>
	
				<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
				</button>
	
				<div class="pswp__caption">
					<div class="pswp__caption__center"></div>
				</div>
	
			</div>
		</div>
	</div>
</html>